/* =========================================
   MODAL (modern glass)
========================================= */
.cert-modal-backdrop {
  background: rgba(0, 0, 0, 0.72) !important;
}

.cert-modal-dialog {
  max-width: 1100px !important;
}

.cert-modal-content {
  border: 1px solid rgba(255, 255, 255, 0.14) !important;
  background: rgba(15, 18, 24, 0.86) !important;
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border-radius: 20px !important;
  overflow: hidden;
  box-shadow: 0 20px 70px rgba(0, 0, 0, 0.55);
}

.cert-modal-header {
  border-bottom: 1px solid rgba(255, 255, 255, 0.12) !important;
  padding: 18px 20px !important;
}

.cert-modal-titlewrap {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.cert-modal-kicker {
  color: rgba(255, 255, 255, 0.72);
  font-weight: 700;
  font-size: 13px;
  letter-spacing: 0.2px;
}

.cert-modal-title {
  color: rgba(255, 255, 255, 0.95) !important;
  font-weight: 900;
  letter-spacing: 0.2px;
}

.cert-modal-body {
  position: relative;
  padding: 18px 20px 20px !important;
  max-height: 78vh;
  overflow: auto;
}

/* =========================================
   PREVIEW STAGE
========================================= */
.cert-stage {
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: center;
  padding: 10px 0 8px;
}

/* ✅ This is the key: CertificateSheet uses fixed 1200x675.
   We scale it down ONLY in preview. */
.cert-preview-wrap {
  width: 100%;
  display: grid;
  place-items: center;
}

/* The export frame exists inside CertificateSheet. Scale it down. */
.cert-preview-wrap .cert-export-frame {
  transform-origin: top center;
  transform: scale(0.78); /* adjust 0.7 - 0.85 if you want */
}

/* Prevent extra space caused by scale (so it doesn't overflow weirdly) */
.cert-preview-wrap .cert-export-frame {
  margin-top: -40px; /* tweak if needed */
  margin-bottom: -60px; /* tweak if needed */
}

/* =========================================
   ACTIONS
========================================= */
.cert-actions {
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 14px;
}

.cert-btn {
  border-radius: 12px !important;
  padding: 10px 14px !important;
  font-weight: 800 !important;
}

.cert-btn-primary {
  background: linear-gradient(90deg, #2563eb, #7c3aed) !important;
  border: none !important;
}

/* =========================================
   FLAKES (behind paper)
========================================= */
.flakes {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 1;
}

.flake {
  position: absolute;
  top: -12px;
  left: calc((var(--i) * 6%) + 4%);
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.35);
  animation: flakeFall 2.8s linear infinite;
  animation-delay: calc(var(--i) * -0.12s);
  opacity: 0.75;
}

@keyframes flakeFall {
  0% {
    transform: translateY(-10px) translateX(0) scale(1);
    opacity: 0;
  }
  10% {
    opacity: 0.8;
  }
  100% {
    transform: translateY(520px) translateX(22px) scale(0.9);
    opacity: 0;
  }
}

/* =========================================
   ✅ EXPORT: OFFSCREEN BUT REAL SIZE
========================================= */
.cert-export-hidden {
  position: fixed;
  left: -99999px;
  top: -99999px;
  width: 1200px;
  height: 675px;
  opacity: 0;
  pointer-events: none;
}

/* responsive */
@media (max-width: 768px) {
  .cert-modal-dialog {
    max-width: 98vw !important;
  }

  .cert-preview-wrap .cert-export-frame {
    transform: scale(0.6);
    margin-top: -80px;
    margin-bottom: -110px;
  }
}
.cert-modal-backdrop {
  background: rgba(0, 0, 0, 0.72) !important;
}

.cert-modal-dialog {
  max-width: 1100px !important;
}

.cert-modal-content {
  border: 1px solid rgba(255, 255, 255, 0.14) !important;
  background: rgba(15, 18, 24, 0.86) !important;
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border-radius: 20px !important;
  overflow: hidden;
  box-shadow: 0 20px 70px rgba(0, 0, 0, 0.55);
}

.cert-modal-body {
  position: relative;
  padding: 18px 20px 20px !important;
  max-height: 78vh;
  overflow: auto;
}

.cert-stage {
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: center;
  padding: 10px 0 8px;
}

.cert-actions {
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 14px;
}

.cert-export-hidden {
  position: fixed;
  left: -99999px;
  top: -99999px;
  opacity: 0;
  pointer-events: none;
}

.flakes {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 1;
}
